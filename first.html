<html lang="en">
<head>
    <title>First</title>
</head>
<body>
<h1 id="text">
    You will need to find the right place to use this one
</h1>
<label>x</label>
<h6 id="x"></h6>
<label>y</label>
<h6 id="y"></h6>
<script type="text/javascript">
    const text = document.getElementById('text');
    const x = document.getElementById('x');
    const y = document.getElementById('y');

    // detect current location and add function to update it
    window.currentLocation = {
        latitude: 0.0,
        longitude: 0.0,
    };
    updateLocation();

    function updateLocation() {
        navigator.geolocation.getCurrentPosition(
            async (position) => {
                window.currentLocation.latitude = position.coords.latitude;
                window.currentLocation.longitude = position.coords.longitude;
                setTimeout(updateLocation, 10000);
            },
            (error) => {
                alert(`Error on location update: ${error.message}`);
            },
            {
                enableHighAccuracy: true,
                maximumAge: 1000,
            }
        );
    }

    const foundInterval = setInterval(async () => {
        if (
            window.currentLocation.latitude > 50 &&
            window.currentLocation.latitude < 51 &&
            window.currentLocation.longitude > 30 &&
            window.currentLocation.longitude < 31
        ) {
            clearInterval(foundInterval);
            await placeFound();
        }
    }, 10000);

    async function placeFound() {
        text.innerText = 'You found it! Now try to look around and find a clues!';

        window.addEventListener('deviceorientation', (event) => {

            x.innerText = String(event.alpha);
            y.innerText = String(event.beta);

            // if (
            //     event.alpha > -30 &&
            //     event.alpha < 30 &&
            //     event.beta > -30 &&
            //     event.beta < 30
            // ) {
            //     text.innerText = 'found text';
            // }

        }, true);
    }


</script>
</body>
</html>
